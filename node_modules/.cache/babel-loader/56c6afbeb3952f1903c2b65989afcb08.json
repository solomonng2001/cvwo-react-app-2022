{"ast":null,"code":"import _slicedToArray from\"/Users/solomonng/dev/cvwo-rails-react-app/cvwo-react-app-2022/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Button,TextField,Dialog,DialogActions,DialogContent,DialogTitle,DialogContentText}from'@material-ui/core';import AlertUser from'../AlertUser';import React,{useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";// create account dialog pagae\nvar CreateAccount=function CreateAccount(_ref){var API=_ref.API,openCreateAccount=_ref.openCreateAccount,handleCloseCreateAccount=_ref.handleCloseCreateAccount;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password_confirmation=_useState6[0],setPassword_confirmation=_useState6[1];var _useState7=useState(undefined),_useState8=_slicedToArray(_useState7,2),severity=_useState8[0],setSeverity=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),message=_useState10[0],setMessage=_useState10[1];var resetCreateAccount=function resetCreateAccount(){setUsername(\"\");setPassword(\"\");setPassword_confirmation(\"\");};// on clicking \"create account\" button, post to backend\nvar handleSubmitCreateAccount=function handleSubmitCreateAccount(){var new_message=[];// reset messsage array\nfetch(API+\"/users\",{method:'POST',headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({username:username,password:password,password_confirmation:password_confirmation})}).then(function(response){if(response.ok){setSeverity('success');new_message.push(\"Account created successfully. Log in to do more!\");setMessage(new_message);// empty fields (prevent clicking create account again, although backend ensures unique username)\nresetCreateAccount();setTimeout(function(){return window.location.reload();},1000);// refresh page\n}return response.json();}).then(function(data){if(data.error){setSeverity('error');data.error.map(function(error){return new_message.push(error);});setMessage(new_message);}}).catch(function(error){return console.log(error.message);});};// dialog contains username, password and password confirmation fields, and \"cancel\" and \"create account\" buttons\nreturn/*#__PURE__*/_jsxs(Dialog,{open:openCreateAccount,onClose:handleCloseCreateAccount,fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Join the ChitChat Community!\"}),/*#__PURE__*/_jsxs(DialogContent,{children:[/*#__PURE__*/_jsx(DialogContentText,{children:\"Dont have an account? Create one to create threads, comment and more...\"}),/*#__PURE__*/_jsx(AlertUser,{severity:severity,message:message}),/*#__PURE__*/_jsx(TextField,{autoFocus:true,value:username,type:\"text\",margin:\"normal\",label:\"Username\",fullWidth:true,variant:\"outlined\",onChange:function onChange(event){return setUsername(event.target.value.trim());}// whitespaces disallowed in username field\n}),/*#__PURE__*/_jsx(TextField,{value:password,type:\"password\",margin:\"normal\",label:\"Password\",fullWidth:true,variant:\"outlined\",onChange:function onChange(event){return setPassword(event.target.value);}}),/*#__PURE__*/_jsx(TextField,{value:password_confirmation,type:\"password\",margin:\"normal\",label:\"Confirm Password\",fullWidth:true,variant:\"outlined\",onChange:function onChange(event){return setPassword_confirmation(event.target.value);}})]}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleCloseCreateAccount,children:\"Close\"}),/*#__PURE__*/_jsx(Button,{onClick:handleSubmitCreateAccount,children:\"Create Account\"})]})]});};export default CreateAccount;","map":{"version":3,"sources":["/Users/solomonng/dev/cvwo-rails-react-app/cvwo-react-app-2022/src/components/account/CreateAccount.tsx"],"names":["Button","TextField","Dialog","DialogActions","DialogContent","DialogTitle","DialogContentText","AlertUser","React","useState","CreateAccount","API","openCreateAccount","handleCloseCreateAccount","username","setUsername","password","setPassword","password_confirmation","setPassword_confirmation","undefined","severity","setSeverity","message","setMessage","resetCreateAccount","handleSubmitCreateAccount","new_message","fetch","method","headers","body","JSON","stringify","then","response","ok","push","setTimeout","window","location","reload","json","data","error","map","catch","console","log","event","target","value","trim"],"mappings":"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","sourcesContent":["import { Button, TextField, Dialog, DialogActions, DialogContent, \n    DialogTitle, DialogContentText } from '@material-ui/core';\nimport AlertUser from '../AlertUser';\nimport { AlertColor } from '@mui/material/Alert';\n\nimport React, { useState } from 'react';\n\ntype Props = {\n    openCreateAccount: boolean;\n    handleCloseCreateAccount: () => void;\n    API: string;\n}\n\n// create account dialog pagae\nconst CreateAccount: React.FC<Props> = ({API, openCreateAccount, handleCloseCreateAccount}: Props) => {\n    const [username, setUsername] = useState<string>(\"\");\n    const [password, setPassword] = useState<string>(\"\");\n    const [password_confirmation, setPassword_confirmation] = useState<string>(\"\");\n    const [severity, setSeverity] = useState<AlertColor | undefined>(undefined);\n    const [message, setMessage] = useState<string[]>([]);\n\n    const resetCreateAccount = () => {\n        setUsername(\"\");\n        setPassword(\"\");\n        setPassword_confirmation(\"\");\n    }\n\n    // on clicking \"create account\" button, post to backend\n    const handleSubmitCreateAccount = () => {\n        let new_message: string[] = []; // reset messsage array\n        fetch(API + \"/users\", {\n            method: 'POST',\n            headers: {\n                \"Content-Type\": \"application/json\",\n                },\n            body: JSON.stringify({\n                username,\n                password,\n                password_confirmation,\n            }),\n        })\n            .then((response) => {\n                if (response.ok) {\n                    setSeverity('success');\n                    new_message.push(\"Account created successfully. Log in to do more!\")\n                    setMessage(new_message);\n                    // empty fields (prevent clicking create account again, although backend ensures unique username)\n                    resetCreateAccount();\n                    setTimeout(() => window.location.reload(), 1000); // refresh page\n                }\n                return response.json();\n            })\n            .then((data) => {\n                if (data.error) {\n                    setSeverity('error');\n                    data.error.map((error: string) =>\n                        new_message.push(error));\n                    setMessage(new_message);\n                }\n            })\n            .catch((error) => console.log(error.message));\n    }\n\n    // dialog contains username, password and password confirmation fields, and \"cancel\" and \"create account\" buttons\n    return (\n        <Dialog open={openCreateAccount} onClose={handleCloseCreateAccount} fullWidth>\n            <DialogTitle>Join the ChitChat Community!</DialogTitle>\n            <DialogContent>\n                <DialogContentText>\n                    Dont have an account? Create one to create threads, comment and more...\n                </DialogContentText>\n                {/* display success/error messages */}\n                <AlertUser severity={severity} message={message}/>\n                    <TextField\n                        autoFocus\n                        value={username}\n                        type='text'\n                        margin=\"normal\"\n                        label=\"Username\"\n                        fullWidth\n                        variant=\"outlined\"\n                        onChange={event => setUsername(event.target.value.trim())} // whitespaces disallowed in username field\n                    />\n                    <TextField\n                        value={password}\n                        type='password'\n                        margin=\"normal\"\n                        label=\"Password\"\n                        fullWidth\n                        variant=\"outlined\"\n                        onChange={event => setPassword(event.target.value)}\n                    />\n                    <TextField\n                        value={password_confirmation}\n                        type='password'\n                        margin=\"normal\"\n                        label=\"Confirm Password\"\n                        fullWidth\n                        variant=\"outlined\"\n                        onChange={event => setPassword_confirmation(event.target.value)}\n                    />\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={handleCloseCreateAccount}>Close</Button>\n                <Button onClick={handleSubmitCreateAccount}>Create Account</Button>\n            </DialogActions>\n        </Dialog>\n    );\n};\n\nexport default CreateAccount;"]},"metadata":{},"sourceType":"module"}