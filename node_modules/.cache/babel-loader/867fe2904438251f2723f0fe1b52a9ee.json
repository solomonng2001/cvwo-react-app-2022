{"ast":null,"code":"import _slicedToArray from\"/Users/solomonng/dev/cvwo-rails-react-app/cvwo-react-app-2022/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Button,Dialog,DialogActions,DialogContent,DialogTitle}from'@material-ui/core';import AlertUser from'../AlertUser';import React,{useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";// Delete comment dialog page\nvar DeleteComment=function DeleteComment(_ref){var API=_ref.API,openDeleteComment=_ref.openDeleteComment,handleCloseDeleteComment=_ref.handleCloseDeleteComment,comment=_ref.comment;var _useState=useState(undefined),_useState2=_slicedToArray(_useState,2),severity=_useState2[0],setSeverity=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),message=_useState4[0],setMessage=_useState4[1];// on clicking delete comment button, delete in backend\nvar handleSubmitDeleteComment=function handleSubmitDeleteComment(){var new_message=[];fetch(API+\"/thread_pages/\"+comment.thread_page_id.toString()+\"/comments/\"+comment.id.toString(),{method:'DELETE',headers:{\"Content-Type\":\"application/json\"}}).then(function(response){if(response.ok){setSeverity('success');new_message.push(\"You have deleted comment!\");setMessage(new_message);// reload page after short delay (prevent user from deleting comment again)\nsetTimeout(function(){return window.location.reload();},1000);}else{setSeverity('error');new_message.push(\"Some error occured\");setMessage(new_message);}}).catch(function(error){return console.log(error.message);});};// dialog contains \"cancel\" and \"delete comment\" buttons\nreturn/*#__PURE__*/_jsxs(Dialog,{open:openDeleteComment,onClose:handleCloseDeleteComment,fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Are you sure you want to delete this comment?\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(AlertUser,{severity:severity,message:message})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleCloseDeleteComment,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:handleSubmitDeleteComment,children:\"Delete Comment\"})]})]});};export default DeleteComment;","map":{"version":3,"sources":["/Users/solomonng/dev/cvwo-rails-react-app/cvwo-react-app-2022/src/components/comment/DeleteComment.tsx"],"names":["Button","Dialog","DialogActions","DialogContent","DialogTitle","AlertUser","React","useState","DeleteComment","API","openDeleteComment","handleCloseDeleteComment","comment","undefined","severity","setSeverity","message","setMessage","handleSubmitDeleteComment","new_message","fetch","thread_page_id","toString","id","method","headers","then","response","ok","push","setTimeout","window","location","reload","catch","error","console","log"],"mappings":"oLAAA,OAASA,MAAT,CAAiBC,MAAjB,CAAyBC,aAAzB,CAAwCC,aAAxC,CACIC,WADJ,KACuB,mBADvB,CAEA,MAAOC,CAAAA,SAAP,KAAsB,cAAtB,CAIA,MAAOC,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,C,wFASA;AACA,GAAMC,CAAAA,aAA8B,CAAG,QAAjCA,CAAAA,aAAiC,MAAwE,IAAtEC,CAAAA,GAAsE,MAAtEA,GAAsE,CAAjEC,iBAAiE,MAAjEA,iBAAiE,CAA9CC,wBAA8C,MAA9CA,wBAA8C,CAApBC,OAAoB,MAApBA,OAAoB,CAC3G,cAAgCL,QAAQ,CAAyBM,SAAzB,CAAxC,wCAAOC,QAAP,eAAiBC,WAAjB,eACA,eAA8BR,QAAQ,CAAW,EAAX,CAAtC,yCAAOS,OAAP,eAAgBC,UAAhB,eAEA;AACA,GAAMC,CAAAA,yBAAyB,CAAG,QAA5BA,CAAAA,yBAA4B,EAAM,CACpC,GAAIC,CAAAA,WAAqB,CAAG,EAA5B,CACAC,KAAK,CAACX,GAAG,CAAG,gBAAN,CAAyBG,OAAO,CAACS,cAAR,CAAuBC,QAAvB,EAAzB,CAA6D,YAA7D,CAA4EV,OAAO,CAACW,EAAR,CAAWD,QAAX,EAA7E,CAAoG,CACrGE,MAAM,CAAE,QAD6F,CAErGC,OAAO,CAAE,CACL,eAAgB,kBADX,CAF4F,CAApG,CAAL,CAMKC,IANL,CAMU,SAACC,QAAD,CAAc,CAChB,GAAIA,QAAQ,CAACC,EAAb,CAAiB,CACbb,WAAW,CAAC,SAAD,CAAX,CACAI,WAAW,CAACU,IAAZ,CAAiB,2BAAjB,EACAZ,UAAU,CAACE,WAAD,CAAV,CAEA;AACAW,UAAU,CAAC,iBAAMC,CAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB,EAAN,EAAD,CAAiC,IAAjC,CAAV,CACH,CAPD,IAOO,CACHlB,WAAW,CAAC,OAAD,CAAX,CACAI,WAAW,CAACU,IAAZ,CAAiB,oBAAjB,EACAZ,UAAU,CAACE,WAAD,CAAV,CACH,CACJ,CAnBL,EAoBKe,KApBL,CAoBW,SAACC,KAAD,QAAWC,CAAAA,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACnB,OAAlB,CAAX,EApBX,EAqBH,CAvBD,CAyBA;AACA,mBACI,MAAC,MAAD,EAAQ,IAAI,CAAEN,iBAAd,CAAiC,OAAO,CAAEC,wBAA1C,CAAoE,SAAS,KAA7E,wBACI,KAAC,WAAD,4DADJ,cAEI,KAAC,aAAD,wBAEI,KAAC,SAAD,EAAW,QAAQ,CAAEG,QAArB,CAA+B,OAAO,CAAEE,OAAxC,EAFJ,EAFJ,cAMI,MAAC,aAAD,yBACI,KAAC,MAAD,EAAQ,OAAO,CAAEL,wBAAjB,oBADJ,cAEI,KAAC,MAAD,EAAQ,OAAO,CAAEO,yBAAjB,4BAFJ,GANJ,GADJ,CAaH,CA5CD,CA8CA,cAAeV,CAAAA,aAAf","sourcesContent":["import { Button, Dialog, DialogActions, DialogContent, \n    DialogTitle } from '@material-ui/core';\nimport AlertUser from '../AlertUser';\nimport { AlertColor } from '@mui/material/Alert';\nimport Comment from '../../types/Comment';\n\nimport React, { useState } from 'react';\n\ntype Props = {\n    openDeleteComment: boolean;\n    handleCloseDeleteComment: () => void;\n    comment: Comment;\n    API: string;\n}\n\n// Delete comment dialog page\nconst DeleteComment: React.FC<Props> = ({API, openDeleteComment, handleCloseDeleteComment, comment}: Props) => {\n    const [severity, setSeverity] = useState<AlertColor | undefined>(undefined);\n    const [message, setMessage] = useState<string[]>([]);\n    \n    // on clicking delete comment button, delete in backend\n    const handleSubmitDeleteComment = () => {\n        let new_message: string[] = [];\n        fetch(API + \"/thread_pages/\" + comment.thread_page_id.toString() + \"/comments/\" + comment.id.toString(), {\n            method: 'DELETE',\n            headers: {\n                \"Content-Type\": \"application/json\",\n                },\n        })\n            .then((response) => {\n                if (response.ok) {\n                    setSeverity('success');\n                    new_message.push(\"You have deleted comment!\")\n                    setMessage(new_message);\n\n                    // reload page after short delay (prevent user from deleting comment again)\n                    setTimeout(() => window.location.reload(), 1000);\n                } else {\n                    setSeverity('error');\n                    new_message.push(\"Some error occured\");\n                    setMessage(new_message);\n                }\n            })\n            .catch((error) => console.log(error.message));\n    }\n\n    // dialog contains \"cancel\" and \"delete comment\" buttons\n    return (\n        <Dialog open={openDeleteComment} onClose={handleCloseDeleteComment} fullWidth>\n            <DialogTitle>Are you sure you want to delete this comment?</DialogTitle>\n            <DialogContent>\n                {/* display success/error messages */}\n                <AlertUser severity={severity} message={message}/>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={handleCloseDeleteComment}>Cancel</Button>\n                <Button onClick={handleSubmitDeleteComment}>Delete Comment</Button>\n            </DialogActions>\n        </Dialog>\n    );\n};\n\nexport default DeleteComment;"]},"metadata":{},"sourceType":"module"}