(this.webpackJsonpsample=this.webpackJsonpsample||[]).push([[0],{121:function(e,t,n){},191:function(e,t,n){},192:function(e,t,n){"use strict";n.r(t);var a=n(4),r=(n(121),n(0)),c=n.n(r),s=n(272),o=n(273),i=n(145),l=n(274),d=n(298),u=n(260),j=n(299),h=n(297),b=n(112),O=n.n(b),g=n(1),m=function(e){var t=e.tagged,n=e.user,a=e.time,r=e.tags;if(t){var c=r.split(",");return Object(g.jsxs)(u.a,{container:!0,children:[Object(g.jsx)(u.a,{item:!0,xs:6,children:Object(g.jsxs)(d.a,{direction:"row",spacing:2,children:[Object(g.jsx)(h.a,{}),Object(g.jsxs)(d.a,{direction:"column",children:[Object(g.jsx)(i.a,{align:"left",variant:"h5",children:n}),Object(g.jsx)(i.a,{align:"left",variant:"subtitle1",color:"textSecondary",children:O()(a).fromNow()})]})]})}),Object(g.jsx)(u.a,{item:!0,container:!0,xs:6,direction:"row",spacing:1,justifyContent:"flex-end",alignItems:"flex-start",children:c.map((function(e){return Object(g.jsx)(u.a,{item:!0,children:Object(g.jsx)(j.a,{label:e})},e)}))})]})}return Object(g.jsxs)(u.a,{container:!0,children:[Object(g.jsx)(u.a,{item:!0,xs:6,children:Object(g.jsxs)(d.a,{direction:"row",spacing:2,children:[Object(g.jsx)(h.a,{}),Object(g.jsxs)(d.a,{direction:"column",children:[Object(g.jsx)(i.a,{align:"left",variant:"h5",children:n}),Object(g.jsx)(i.a,{align:"left",variant:"subtitle1",color:"textSecondary",children:O()(a).fromNow()})]})]})}),Object(g.jsx)(u.a,{item:!0,xs:6})]})},f=n(270),x=n(99),p=n.n(x),S=n(98),C=n.n(S),v=n(132),y=n.n(v),w=n(295),I=n(265),P=n(266),A=n(283),T=n(268),U=n(269),k=n(288),_=function(e){var t=e.severity,n=e.message;return Object(g.jsx)(g.Fragment,{children:n.map((function(e){return Object(g.jsx)(k.a,{severity:t,children:e})}))})},M=function(e){var t=e.API,n=e.openCreateComment,c=e.handleCloseCreateComment,s=e.thread_page_id,o=e.currentUserState,i=Object(r.useState)(""),l=Object(a.a)(i,2),d=l[0],u=l[1],j=Object(r.useState)(void 0),h=Object(a.a)(j,2),b=h[0],O=h[1],m=Object(r.useState)([]),f=Object(a.a)(m,2),x=f[0],p=f[1];return Object(g.jsxs)(w.a,{open:n,onClose:c,fullWidth:!0,children:[Object(g.jsx)(I.a,{children:"What's on your mind?"}),Object(g.jsxs)(P.a,{children:[Object(g.jsx)(_,{severity:b,message:x}),Object(g.jsx)(A.a,{value:d,autoFocus:!0,type:"text",margin:"normal",label:"Say something here...",fullWidth:!0,variant:"standard",multiline:!0,onChange:function(e){return u(e.target.value)}})]}),Object(g.jsxs)(T.a,{children:[Object(g.jsx)(U.a,{onClick:c,children:"Cancel"}),Object(g.jsx)(U.a,{onClick:function(){var e=o.currentUser.id,n=[];""===d&&n.push("Fill in all fields"),n.length>0?(O("error"),p(n)):fetch(t+"/thread_pages/"+s.toString()+"/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({body:d,user_id:e,thread_page_id:s})}).then((function(e){e.ok?(O("success"),n.push("You have created a new comment!"),p(n),u(""),setTimeout((function(){return window.location.reload()}),1e3)):(O("error"),n.push("Some error occured"),p(n))})).catch((function(e){return console.log(e.message)}))},children:"Comment"})]})]})},W=function(e){var t=e.API,n=e.openDeleteThread,c=e.handleCloseDeleteThread,s=e.thread_page_id,o=Object(r.useState)(void 0),i=Object(a.a)(o,2),l=i[0],d=i[1],u=Object(r.useState)([]),j=Object(a.a)(u,2),h=j[0],b=j[1];return Object(g.jsxs)(w.a,{open:n,onClose:c,fullWidth:!0,children:[Object(g.jsx)(I.a,{children:"Are you sure you want to delete this thread?"}),Object(g.jsx)(P.a,{children:Object(g.jsx)(_,{severity:l,message:h})}),Object(g.jsxs)(T.a,{children:[Object(g.jsx)(U.a,{onClick:c,children:"Cancel"}),Object(g.jsx)(U.a,{onClick:function(){var e=[];fetch(t+"/thread_pages/"+s.toString(),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok){d("success"),e.push("You have deleted thread!"),b(e);var n=window.location.href;setTimeout(n===window.location.protocol+"//"+window.location.host+"/thread"?function(){return window.location.reload()}:function(){return window.location.replace(window.location.protocol+"//"+window.location.host)},1e3)}else d("error"),e.push("Some error occured"),b(e)})).catch((function(e){return console.log(e.message)}))},children:"Delete Thread"})]})]})},L=function(e){var t=e.API,n=e.openUpdateThread,c=e.handleCloseUpdateThread,s=e.thread_page_id,o=Object(r.useState)(""),i=Object(a.a)(o,2),l=i[0],d=i[1],u=Object(r.useState)(""),j=Object(a.a)(u,2),h=j[0],b=j[1],O=Object(r.useState)(void 0),m=Object(a.a)(O,2),f=m[0],x=m[1],p=Object(r.useState)([]),S=Object(a.a)(p,2),C=S[0],v=S[1];return Object(g.jsxs)(w.a,{open:n,onClose:c,fullWidth:!0,children:[Object(g.jsx)(I.a,{children:"What's on your mind?"}),Object(g.jsxs)(P.a,{children:[Object(g.jsx)(_,{severity:f,message:C}),Object(g.jsx)(A.a,{value:l,autoFocus:!0,type:"text",margin:"normal",label:"Title",fullWidth:!0,variant:"standard",onChange:function(e){return d(e.target.value)}}),Object(g.jsx)(A.a,{value:h,type:"text",margin:"normal",label:"Say something here...",fullWidth:!0,variant:"standard",multiline:!0,onChange:function(e){return b(e.target.value)}})]}),Object(g.jsxs)(T.a,{children:[Object(g.jsx)(U.a,{onClick:c,children:"Cancel"}),Object(g.jsx)(U.a,{onClick:function(){var e=[];""!==l&&""!==h||e.push("Fill in all fields"),e.length>0?(x("error"),v(e)):fetch(t+"/thread_pages/"+s,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:l,body:h})}).then((function(t){t.ok?(x("success"),e.push("Changes saved!"),v(e),d(""),b(""),setTimeout((function(){return window.location.reload()}),1e3)):(x("error"),e.push("Some error occured"),v(e))})).catch((function(e){return console.log(e.message)}))},children:"Edit Thread"})]})]})},E=function(e){var t=e.API,n=e.currentUserState,r=e.thread,s=e.globalMessageState,o=c.a.useState(!1),i=Object(a.a)(o,2),l=i[0],u=i[1],j=c.a.useState(!1),h=Object(a.a)(j,2),b=h[0],O=h[1],m=c.a.useState(!1),x=Object(a.a)(m,2),S=x[0],v=x[1];return Object(g.jsxs)(d.a,{direction:"row",justifyContent:"flex-end",alignItems:"center",spacing:1,children:[Object(g.jsx)(f.a,{onClick:function(){n.isLoggedIn?u(!0):(s.setSeverityGlobalMessage("info"),s.setGlobalMessage(["Please login to comment"]),s.handleOpenGlobalMessage())},children:Object(g.jsx)(y.a,{})}),Object(g.jsx)(M,{API:t,thread_page_id:r.id,openCreateComment:l,handleCloseCreateComment:function(){u(!1)},currentUserState:n}),r.user_id===n.currentUser.id&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(f.a,{onClick:function(){v(!0)},children:Object(g.jsx)(C.a,{})}),Object(g.jsx)(L,{API:t,thread_page_id:r.id,openUpdateThread:S,handleCloseUpdateThread:function(){v(!1)}})]}),r.user_id===n.currentUser.id&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(f.a,{onClick:function(){O(!0)},children:Object(g.jsx)(p.a,{})}),Object(g.jsx)(W,{API:t,thread_page_id:r.id,openDeleteThread:b,handleCloseDeleteThread:function(){O(!1)}})]})]})},D=function(e){var t=e.body,n=e.toOverflow,a=t.split("\n").filter((function(e){return""!==e}));if(!n)return Object(g.jsx)(d.a,{direction:"column",spacing:0,children:a.map((function(e,t){return Object(g.jsxs)("div",{children:[Object(g.jsx)(i.a,{align:"left",variant:"body1",children:e}),Object(g.jsx)("br",{})]},t)}))});var r=a.join("...");return Object(g.jsx)(i.a,{noWrap:n,align:"left",variant:"body1",children:r})},G=function(e){var t=e.API,n=e.toOverflow,a=e.thread,r=e.currentUserState,c=e.globalMessageState;return Object(g.jsxs)(s.a,{children:[Object(g.jsx)(o.a,{style:{padding:"20px"},href:"/thread/"+a.id,children:Object(g.jsx)(i.a,{variant:"h4",align:"left",children:a.title})}),Object(g.jsx)(l.a,{children:Object(g.jsxs)(d.a,{direction:"column",spacing:3,children:[Object(g.jsx)(m,{tagged:!0,user:a.user.username,time:new Date(a.created_at),tags:a.tags}),Object(g.jsx)(D,{body:a.body,toOverflow:n}),Object(g.jsx)(E,{globalMessageState:c,API:t,commentable:!0,thread:a,currentUserState:r})]})})]})},F=function(e){var t=e.API,n=e.threads,a=e.error,r=e.isLoaded,c=e.currentUserState,s=e.globalMessageState;return a?Object(g.jsxs)("div",{children:["Error: ",a.message]}):r?Object(g.jsx)("div",{style:{width:"50vw",margin:"auto",textAlign:"center"},children:Object(g.jsx)(d.a,{spacing:2,children:n.map((function(e){return Object(g.jsx)(G,{globalMessageState:s,API:t,toOverflow:!0,thread:e,currentUserState:c},e.id)}))})}):Object(g.jsx)("div",{children:"Loading..."})},N=n(133),J=n.n(N),B=n(294),H=n(287),z=n(276),R=n(300),Y=n(135),q=n.n(Y),K=n(138),Q=n.n(K),V=function(e){return e.replace(/\s/g,"").toLowerCase().split("#").filter((function(e){return""!==e}))},X=function(e){var t=e.API,n=e.openCreateThread,c=e.handleCloseCreateThread,s=e.currentUserState,o=Object(r.useState)(""),i=Object(a.a)(o,2),l=i[0],d=i[1],h=Object(r.useState)(""),b=Object(a.a)(h,2),O=b[0],m=b[1],f=Object(r.useState)(""),x=Object(a.a)(f,2),p=x[0],S=x[1],C=Object(r.useState)([]),v=Object(a.a)(C,2),y=v[0],k=v[1],M=Object(r.useState)(void 0),W=Object(a.a)(M,2),L=W[0],E=W[1],D=Object(r.useState)([]),G=Object(a.a)(D,2),F=G[0],N=G[1];Object(r.useEffect)((function(){k(V(p))}),[p]);return Object(g.jsxs)(w.a,{open:n,onClose:c,fullWidth:!0,children:[Object(g.jsx)(I.a,{children:"What's on your mind?"}),Object(g.jsxs)(P.a,{children:[Object(g.jsx)(_,{severity:L,message:F}),Object(g.jsx)(A.a,{value:l,autoFocus:!0,type:"text",margin:"normal",label:"Title",fullWidth:!0,variant:"standard",onChange:function(e){return d(e.target.value)}}),Object(g.jsx)(A.a,{value:p,type:"text",margin:"normal",label:"Tags",fullWidth:!0,placeholder:"#HawkerFood #Travel #School",variant:"standard",onChange:function(e){return S(e.target.value)}}),Object(g.jsx)(u.a,{container:!0,direction:"row",spacing:1,justifyContent:"flex-start",alignItems:"flex-start",children:y.length>0&&y.map((function(e){return Object(g.jsx)(u.a,{item:!0,children:Object(g.jsx)(j.a,{label:e})})}))}),Object(g.jsx)(A.a,{value:O,type:"text",margin:"normal",label:"Say something here...",fullWidth:!0,variant:"standard",multiline:!0,onChange:function(e){return m(e.target.value)}})]}),Object(g.jsxs)(T.a,{children:[Object(g.jsx)(U.a,{onClick:c,children:"Cancel"}),Object(g.jsx)(U.a,{onClick:function(){var e=s.currentUser.id,n=y.toString(),a=[];""!==l&&""!==O||a.push("Fill in all fields"),a.length>0?(E("error"),N(a)):fetch(t+"/thread_pages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:l,body:O,user_id:e,tags:n})}).then((function(e){e.ok?(E("success"),a.push("You have created a new thread!"),N(a),d(""),m(""),S(""),setTimeout((function(){return window.location.reload()}),1e3)):(E("error"),a.push("Some error occured"),N(a))})).catch((function(e){return console.log(e.message)}))},children:"Create Thread"})]})]})},Z=n(136),$=n.n(Z),ee=function(e){var t=e.setThreadResults,n=e.currentUserState,s=e.API,l=e.globalMessageState,u=c.a.useState(!1),j=Object(a.a)(u,2),h=j[0],b=j[1],O=Object(r.useState)(!1),m=Object(a.a)(O,2),f=m[0],x=m[1],p=Object(r.useState)(""),S=Object(a.a)(p,2),C=S[0],v=S[1],y=Object(r.useState)([]),w=Object(a.a)(y,2),I=w[0],P=w[1];return Object(r.useEffect)((function(){if(""===C)P([]);else if(f){var e=V(C);console.log(e),fetch(s+"/thread_pages/search/tags/autocomplete",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({tagsArray:e})}).then((function(e){return e.json()})).then((function(e){P(e)}))}else{var t=C;fetch(s+"/thread_pages/search/title/autocomplete",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:t})}).then((function(e){return e.json()})).then((function(e){P(e)}))}}),[C,f,s]),Object(g.jsxs)("div",{style:{paddingTop:"20px",paddingBottom:"20px",position:"sticky",top:"50px",zIndex:"1100"},children:[Object(g.jsxs)(B.a,{component:"form",sx:{display:"flex",alignItems:"center"},children:[Object(g.jsx)(H.a,{sx:{ml:1,flex:1},placeholder:f?"Search by Tags: #HawkerFood #Travel # School":"Search by Title",value:C,onChange:function(e){return v(e.target.value)}}),Object(g.jsx)(R.a,{onClick:function(){if(""!==C)if(f){var e=V(C);fetch(s+"/thread_pages/search/tags",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({tagsArray:e})}).then((function(e){return e.json()})).then((function(e){t(e)}))}else{var n=C;fetch(s+"/thread_pages/search/title",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:n})}).then((function(e){return e.json()})).then((function(e){t(e)}))}},children:Object(g.jsx)(q.a,{})}),Object(g.jsx)(R.a,{onClick:function(){return x(!f)},children:Object(g.jsx)($.a,{color:f?"primary":"disabled"})}),Object(g.jsx)(z.a,{sx:{height:28,m:.5},orientation:"vertical"}),Object(g.jsx)(R.a,{onClick:function(){n.isLoggedIn?b(!0):(l.setSeverityGlobalMessage("info"),l.setGlobalMessage(["Please login to create thread"]),l.handleOpenGlobalMessage())},children:Object(g.jsx)(Q.a,{})}),Object(g.jsx)(X,{API:s,openCreateThread:h,handleCloseCreateThread:function(){b(!1)},currentUserState:n})]}),I.length>0&&Object(g.jsx)(B.a,{sx:{justifyItems:"flex-start"},children:Object(g.jsx)(d.a,{direction:"column",alignItems:"flex-start",children:I.map((function(e){return Object(g.jsx)(o.a,{style:{paddingTop:3,paddingBottom:3,paddingLeft:8},onClick:function(){return t=e.id,void window.location.replace(window.location.protocol+"//"+window.location.host+"/thread/"+t.toString());var t},children:Object(g.jsx)(i.a,{align:"left",children:e.title},e.id)})}))})})]})},te=function(e){var t=e.currentUserState,n=e.API,c=e.globalMessageState,s=Object(r.useState)([]),o=Object(a.a)(s,2),l=o[0],d=o[1],u=Object(r.useState)(null),j=Object(a.a)(u,2),h=j[0],b=j[1],O=Object(r.useState)(!1),m=Object(a.a)(O,2),f=m[0],x=m[1],p=Object(r.useState)(l),S=Object(a.a)(p,2),C=S[0],v=S[1];return Object(r.useEffect)((function(){l.length>0?(x(!0),v(l)):fetch(n+"/thread_pages",{method:"GET",mode:"cors"}).then((function(e){return e.json()})).then((function(e){x(!0),v(e)}),(function(e){x(!0),b(e)}))}),[l,n]),Object(g.jsxs)("div",{style:{width:"50vw",margin:"auto",textAlign:"center"},children:[Object(g.jsx)(i.a,{variant:"h3",style:{paddingTop:"70px"},children:Object(g.jsx)(J.a,{onInit:function(e){e.changeDelay(80).typeString("ChitChat").pauseFor(1e3).start()}})}),Object(g.jsx)(ee,{setThreadResults:d,currentUserState:t,API:n,globalMessageState:c}),Object(g.jsx)(F,{globalMessageState:c,API:n,threads:C,currentUserState:t,error:h,isLoaded:f})]})},ne={id:0,title:"",body:"",user_id:0,tags:"",created_at:"",updated_at:"",comments:[],user:{username:""}},ae=n(277),re=function(e){var t=e.API,n=e.openDeleteComment,c=e.handleCloseDeleteComment,s=e.comment,o=Object(r.useState)(void 0),i=Object(a.a)(o,2),l=i[0],d=i[1],u=Object(r.useState)([]),j=Object(a.a)(u,2),h=j[0],b=j[1];return Object(g.jsxs)(w.a,{open:n,onClose:c,fullWidth:!0,children:[Object(g.jsx)(I.a,{children:"Are you sure you want to delete this comment?"}),Object(g.jsx)(P.a,{children:Object(g.jsx)(_,{severity:l,message:h})}),Object(g.jsxs)(T.a,{children:[Object(g.jsx)(U.a,{onClick:c,children:"Cancel"}),Object(g.jsx)(U.a,{onClick:function(){var e=[];fetch(t+"/thread_pages/"+s.thread_page_id.toString()+"/comments/"+s.id.toString(),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(t){t.ok?(d("success"),e.push("You have deleted comment!"),b(e),setTimeout((function(){return window.location.reload()}),1e3)):(d("error"),e.push("Some error occured"),b(e))})).catch((function(e){return console.log(e.message)}))},children:"Delete Comment"})]})]})},ce=function(e){var t=e.API,n=e.openUpdateComment,c=e.handleCloseUpdateComment,s=e.comment,o=Object(r.useState)(""),i=Object(a.a)(o,2),l=i[0],d=i[1],u=Object(r.useState)(void 0),j=Object(a.a)(u,2),h=j[0],b=j[1],O=Object(r.useState)([]),m=Object(a.a)(O,2),f=m[0],x=m[1];return Object(g.jsxs)(w.a,{open:n,onClose:c,fullWidth:!0,children:[Object(g.jsx)(I.a,{children:"What's on your mind?"}),Object(g.jsxs)(P.a,{children:[Object(g.jsx)(_,{severity:h,message:f}),Object(g.jsx)(A.a,{value:l,type:"text",margin:"normal",label:"Say something here...",fullWidth:!0,variant:"standard",multiline:!0,onChange:function(e){return d(e.target.value)}})]}),Object(g.jsxs)(T.a,{children:[Object(g.jsx)(U.a,{onClick:c,children:"Cancel"}),Object(g.jsx)(U.a,{onClick:function(){var e=[];""===l&&e.push("Fill in all fields"),e.length>0?(b("error"),x(e)):fetch(t+"/thread_pages/"+s.thread_page_id+"/comments/"+s.id,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({body:l})}).then((function(t){t.ok?(b("success"),e.push("Changes saved!"),x(e),d(""),setTimeout((function(){return window.location.reload()}),1e3)):(b("error"),e.push("Some error occured"),x(e))})).catch((function(e){return console.log(e.message)}))},children:"Edit Comment"})]})]})},se=function(e){var t=e.API,n=e.comment,r=e.currentUserState,s=c.a.useState(!1),o=Object(a.a)(s,2),i=o[0],l=o[1],u=c.a.useState(!1),j=Object(a.a)(u,2),h=j[0],b=j[1];return Object(g.jsxs)(d.a,{direction:"row",justifyContent:"flex-end",alignItems:"center",spacing:1,children:[n.user_id===r.currentUser.id&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(f.a,{onClick:function(){b(!0)},children:Object(g.jsx)(C.a,{})}),Object(g.jsx)(ce,{API:t,comment:n,openUpdateComment:h,handleCloseUpdateComment:function(){b(!1)}})]}),n.user_id===r.currentUser.id&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(f.a,{onClick:function(){l(!0)},children:Object(g.jsx)(p.a,{})}),Object(g.jsx)(re,{API:t,comment:n,openDeleteComment:i,handleCloseDeleteComment:function(){l(!1)}})]})]})},oe=Object(ae.a)({commentBody:{fontSize:16,whiteSpace:"pre-wrap",paddingBottom:"1em"},commentCard:{marginBottom:"1em"},metadata:{fontSize:14}}),ie=function(e){var t=e.API,n=e.comment,a=e.currentUserState,r=oe();return Object(g.jsx)(s.a,{className:r.commentCard,children:Object(g.jsx)(l.a,{children:Object(g.jsxs)(d.a,{direction:"column",spacing:3,children:[Object(g.jsx)(m,{tagged:!1,user:n.user.username,time:new Date(n.created_at),tags:""}),Object(g.jsx)(D,{body:n.body,toOverflow:!1}),Object(g.jsx)(se,{API:t,comment:n,currentUserState:a})]})})})},le=function(e){var t=e.API,n=e.comments,a=e.currentUserState;return Object(g.jsx)("ul",{children:n.map((function(e){return Object(g.jsx)(ie,{API:t,comment:e,currentUserState:a},e.id)}))})},de=function(e){var t=e.threadID,n=e.currentUserState,c=e.API,s=e.globalMessageState,o=Object(r.useState)(null),i=Object(a.a)(o,2),l=i[0],d=i[1],u=Object(r.useState)(!1),j=Object(a.a)(u,2),h=j[0],b=j[1],O=Object(r.useState)(ne),m=Object(a.a)(O,2),f=m[0],x=m[1];return Object(r.useEffect)((function(){fetch(c+"/thread_pages/"+t,{method:"GET",mode:"cors"}).then((function(e){return e.json()})).then((function(e){b(!0),x(e)}),(function(e){b(!0),d(e)}))}),[t,c]),l?Object(g.jsxs)("div",{children:["Error: ",l.message]}):h?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(G,{globalMessageState:s,API:c,toOverflow:!1,thread:f,currentUserState:n},f.id),Object(g.jsx)(le,{API:c,comments:f.comments,currentUserState:n})]}):Object(g.jsx)("div",{children:"Loading..."})},ue=n(17),je=function(e){var t=e.currentUserState,n=e.API,a=e.globalMessageState,r=Object(ue.g)().threadID;return Object(g.jsx)("div",{style:{width:"50vw",margin:"auto",textAlign:"center",paddingTop:"30px"},children:Object(g.jsx)(de,{globalMessageState:a,threadID:r,currentUserState:t,API:n})})},he=n(111),be=n(141),Oe=n(293),ge=n(285),me=n(280),fe=n(281),xe=n(282),pe=n(296),Se=n(301),Ce=n(139),ve=n.n(Ce),ye=n(284),we=n(292),Ie=n(278),Pe=function(e){var t=e.API,n=e.openLogIn,c=e.handleCloseLogIn,s=e.currentUserState,o=(e.globalMessageState,Object(r.useState)("")),i=Object(a.a)(o,2),l=i[0],d=i[1],u=Object(r.useState)(""),j=Object(a.a)(u,2),h=j[0],b=j[1],O=Object(r.useState)("success"),m=Object(a.a)(O,2),f=m[0],x=m[1],p=Object(r.useState)([]),S=Object(a.a)(p,2),C=S[0],v=S[1];return Object(g.jsxs)(w.a,{open:n,onClose:c,fullWidth:!0,children:[Object(g.jsx)(I.a,{children:"Welcome Back!"}),Object(g.jsxs)(P.a,{children:[Object(g.jsx)(Ie.a,{children:"Log in to create threads, comment and more..."}),Object(g.jsx)(Ie.a,{children:"Dont have an account? Create one to do much more!"}),Object(g.jsx)(_,{severity:f,message:C}),Object(g.jsx)(A.a,{autoFocus:!0,value:l,type:"text",margin:"normal",label:"Username",fullWidth:!0,variant:"outlined",onChange:function(e){return d(e.target.value)}}),Object(g.jsx)(A.a,{value:h,type:"password",margin:"normal",label:"Password",fullWidth:!0,variant:"outlined",onChange:function(e){return b(e.target.value)}})]}),Object(g.jsxs)(T.a,{children:[Object(g.jsx)(U.a,{onClick:c,children:"Cancel"}),Object(g.jsx)(U.a,{onClick:function(){var e=[];fetch(t+"/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:l,password:h})}).then((function(e){return e.json()})).then((function(t){t.error?(x("error"),t.error.map((function(t){return e.push(t)})),v(e)):(s.setCurrentUser(t.user),localStorage.setItem("token",t.token),x("success"),e.push("Logged in successfully!"),v(e),d(""),b(""),setTimeout((function(){return window.location.reload()}),1e3))})).catch((function(e){return console.log(e.message)}))},children:"Log In"})]})]})},Ae=function(e){var t=e.API,n=e.openCreateAccount,c=e.handleCloseCreateAccount,s=Object(r.useState)(""),o=Object(a.a)(s,2),i=o[0],l=o[1],d=Object(r.useState)(""),u=Object(a.a)(d,2),j=u[0],h=u[1],b=Object(r.useState)(""),O=Object(a.a)(b,2),m=O[0],f=O[1],x=Object(r.useState)(void 0),p=Object(a.a)(x,2),S=p[0],C=p[1],v=Object(r.useState)([]),y=Object(a.a)(v,2),k=y[0],M=y[1];return Object(g.jsxs)(w.a,{open:n,onClose:c,fullWidth:!0,children:[Object(g.jsx)(I.a,{children:"Join the ChitChat Community!"}),Object(g.jsxs)(P.a,{children:[Object(g.jsx)(Ie.a,{children:"Dont have an account? Create one to create threads, comment and more..."}),Object(g.jsx)(_,{severity:S,message:k}),Object(g.jsx)(A.a,{autoFocus:!0,value:i,type:"text",margin:"normal",label:"Username",fullWidth:!0,variant:"outlined",onChange:function(e){return l(e.target.value)}}),Object(g.jsx)(A.a,{value:j,type:"password",margin:"normal",label:"Password",fullWidth:!0,variant:"outlined",onChange:function(e){return h(e.target.value)}}),Object(g.jsx)(A.a,{value:m,type:"password",margin:"normal",label:"Confirm Password",fullWidth:!0,variant:"outlined",onChange:function(e){return f(e.target.value)}})]}),Object(g.jsxs)(T.a,{children:[Object(g.jsx)(U.a,{onClick:c,children:"Close"}),Object(g.jsx)(U.a,{onClick:function(){var e=[];fetch(t+"/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:i,password:j,password_confirmation:m})}).then((function(t){return t.ok&&(C("success"),e.push("Account created successfully. Log in to do more!"),M(e),l(""),h(""),f(""),setTimeout((function(){return window.location.reload()}),1e3)),t.json()})).then((function(t){t.error&&(C("error"),t.error.map((function(t){return e.push(t)})),M(e))})).catch((function(e){return console.log(e.message)}))},children:"Create Account"})]})]})},Te=function(e){var t=e.API,n=e.openChangePassword,c=e.handleCloseChangePassword,s=e.currentUserState,o=Object(r.useState)(""),i=Object(a.a)(o,2),l=i[0],d=i[1],u=Object(r.useState)(""),j=Object(a.a)(u,2),h=j[0],b=j[1],O=Object(r.useState)(void 0),m=Object(a.a)(O,2),f=m[0],x=m[1],p=Object(r.useState)([]),S=Object(a.a)(p,2),C=S[0],v=S[1];return Object(g.jsxs)(w.a,{open:n,onClose:c,fullWidth:!0,children:[Object(g.jsx)(I.a,{children:"Change Password"}),Object(g.jsxs)(P.a,{children:[Object(g.jsx)(_,{severity:f,message:C}),Object(g.jsx)(A.a,{value:l,type:"password",margin:"normal",label:"Password",fullWidth:!0,variant:"outlined",onChange:function(e){return d(e.target.value)}}),Object(g.jsx)(A.a,{value:h,type:"password",margin:"normal",label:"Confirm Password",fullWidth:!0,variant:"outlined",onChange:function(e){return b(e.target.value)}})]}),Object(g.jsxs)(T.a,{children:[Object(g.jsx)(U.a,{onClick:c,children:"Close"}),Object(g.jsx)(U.a,{onClick:function(){var e=l,n=h,a=[];fetch(t+"/users/"+s.currentUser.id,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e,password_confirmation:n})}).then((function(e){return e.ok&&(x("success"),a.push("Password Changed!"),v(a),d(""),b(""),setTimeout((function(){return window.location.reload()}),1e3)),e.json()})).then((function(e){e.error&&(x("error"),e.error.map((function(e){return a.push(e)})),v(a))})).catch((function(e){return console.log(e.message)}))},children:"Change Password"})]})]})},Ue=function(e){var t=e.API,n=e.anchorElAccountSettings,c=e.openAccountSettings,s=e.handleCloseAccountSettings,o=e.currentUserState,i=e.globalMessageState,l=r.useState(!1),d=Object(a.a)(l,2),u=d[0],j=d[1],h=r.useState(!1),b=Object(a.a)(h,2),O=b[0],m=b[1],f=r.useState(!1),x=Object(a.a)(f,2),p=x[0],S=x[1];return Object(g.jsx)("div",{children:o.isLoggedIn?Object(g.jsxs)(ye.a,{id:"account-settings",anchorEl:n,open:c,onClose:s,MenuListProps:{"aria-labelledby":"basic-button"},children:[Object(g.jsx)(we.a,{onClick:function(){S(!0)},children:"Change Password"}),Object(g.jsx)(Te,{API:t,openChangePassword:p,handleCloseChangePassword:function(){S(!1)},currentUserState:o}),Object(g.jsx)(we.a,{onClick:function(){o.setCurrentUser(o.emptyCurrentUser),localStorage.removeItem("token"),window.location.reload()},children:"Log Out"})]}):Object(g.jsxs)(ye.a,{id:"account-settings",anchorEl:n,open:c,onClose:s,MenuListProps:{"aria-labelledby":"basic-button"},children:[Object(g.jsx)(we.a,{onClick:function(){j(!0)},children:"Log In"}),Object(g.jsx)(Pe,{API:t,openLogIn:u,handleCloseLogIn:function(){j(!1)},currentUserState:o,globalMessageState:i}),Object(g.jsx)(we.a,{onClick:function(){m(!0)},children:"Create Account"}),Object(g.jsx)(Ae,{API:t,openCreateAccount:O,handleCloseCreateAccount:function(){m(!1)}})]})})},ke=function(e){var t=e.API,n=e.currentUserState,r=e.globalMessageState,s=c.a.useState(null),l=Object(a.a)(s,2),u=l[0],j=l[1],h=Boolean(u),b=[{pageName:"MyThreads",href:"/mythreads"}];return Object(g.jsx)(ge.a,{marginBottom:"70px",children:Object(g.jsx)(me.a,{position:"fixed",style:{zIndex:"1200"},children:Object(g.jsx)(fe.a,{maxWidth:"xl",children:Object(g.jsxs)(xe.a,{disableGutters:!0,children:[Object(g.jsxs)(ge.a,{flexGrow:1,display:"flex",alignItems:"center",children:[Object(g.jsx)(ve.a,{sx:{mr:1}}),Object(g.jsx)(i.a,{variant:"h6",component:"a",href:"/",style:{color:"inherit",textDecoration:"none",marginRight:"40px"},children:"ChitChat"}),Object(g.jsx)(d.a,{direction:"row",children:n.isLoggedIn&&b.map((function(e){return Object(g.jsx)(o.a,{style:{padding:"10px",borderRadius:"10px"},href:e.href,children:Object(g.jsx)(i.a,{children:e.pageName})},e.pageName)}))})]}),Object(g.jsx)(pe.a,{title:"Account Settings",children:Object(g.jsx)(f.a,{id:"basic-button","aria-controls":h?"account-settings":void 0,"aria-haspopup":"true","aria-expanded":h?"true":void 0,onClick:function(e){j(e.currentTarget)},children:Object(g.jsx)(Se.a,{})})}),Object(g.jsx)(Ue,{API:t,anchorElAccountSettings:u,openAccountSettings:h,handleCloseAccountSettings:function(){j(null)},currentUserState:n,globalMessageState:r})]})})})})},_e=n(289),Me=function(e){var t=e.globalMessage,n=e.severityGlobalMessage,a=e.handleCloseGlobalMessage,r=e.openGlobalMessage;return Object(g.jsx)(d.a,{spacing:2,children:t.map((function(e){return Object(g.jsx)(_e.a,{open:r,autoHideDuration:6e3,onClose:a,children:Object(g.jsx)(k.a,{onClose:a,severity:n,sx:{width:"100%"},children:e})})}))})},We=function(e){var t=e.currentUserState,n=e.API,c=e.globalMessageState,s=Object(r.useState)(null),o=Object(a.a)(s,2),i=o[0],l=o[1],d=Object(r.useState)(!1),u=Object(a.a)(d,2),j=u[0],h=u[1],b=Object(r.useState)([]),O=Object(a.a)(b,2),m=O[0],f=O[1];return Object(r.useEffect)((function(){t.isLoggedIn&&fetch(n+"/mythreads/"+t.currentUser.id,{method:"GET",mode:"cors"}).then((function(e){return e.json()})).then((function(e){h(!0),f(e)}),(function(e){h(!0),l(e)}))}),[t.isLoggedIn,t.currentUser.id,n]),Object(g.jsx)("div",{style:{width:"50vw",margin:"auto",textAlign:"center",paddingTop:"30px"},children:Object(g.jsx)(F,{globalMessageState:c,API:n,threads:m,error:i,isLoaded:j,currentUserState:t})})},Le="http://localhost:3000/",Ee=Object(be.a)({palette:{primary:{light:"#757ce8",main:"#3f50b5",dark:"#002884",contrastText:"#fff"},secondary:{light:"#ff7961",main:"#f44336",dark:"#ba000d",contrastText:"#000"}}}),De=function(){var e=Object(r.useState)([]),t=Object(a.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(void 0),o=Object(a.a)(s,2),i=o[0],l=o[1],d=Object(r.useState)(!0),u=Object(a.a)(d,2),j=u[0],h=u[1],b={setGlobalMessage:c,setSeverityGlobalMessage:l,handleOpenGlobalMessage:function(){h(!0)}},O={id:0,username:"",password_digest:"",created_at:"",updated_at:""},m=Object(r.useState)(O),f=Object(a.a)(m,2),x=f[0],p=f[1],S={currentUser:x,setCurrentUser:p,emptyCurrentUser:O,isLoggedIn:0!==x.id};return Object(r.useEffect)((function(){var e=[],t=localStorage.getItem("token");t&&fetch(Le+"/login",{method:"GET",headers:{Authorization:"".concat(t)}}).then((function(e){return e.json()})).then((function(t){t.error?(l("error"),t.error.map((function(t){return e.push(t)})),c(e)):p(t)}))}),[]),Object(g.jsx)("div",{className:"App",children:Object(g.jsxs)(Oe.a,{theme:Ee,children:[Object(g.jsx)(ke,{API:Le,currentUserState:S,globalMessageState:b}),Object(g.jsx)(Me,{globalMessage:n,severityGlobalMessage:i,openGlobalMessage:j,handleCloseGlobalMessage:function(){h(!1),l(void 0),c([])}}),Object(g.jsx)(he.a,{children:Object(g.jsxs)(ue.c,{children:[Object(g.jsx)(ue.a,{path:"/thread/:threadID",element:Object(g.jsx)(je,{globalMessageState:b,currentUserState:S,API:Le})}),Object(g.jsx)(ue.a,{path:"/",element:Object(g.jsx)(te,{globalMessageState:b,currentUserState:S,API:Le})}),Object(g.jsx)(ue.a,{path:"/mythreads",element:Object(g.jsx)(We,{globalMessageState:b,currentUserState:S,API:Le})})]})})]})})},Ge=n(21),Fe=n.n(Ge);n(191);Fe.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(De,{})}),document.getElementById("root"))}},[[192,1,2]]]);
//# sourceMappingURL=main.faf60073.chunk.js.map